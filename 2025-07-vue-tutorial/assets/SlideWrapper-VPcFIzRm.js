import{a2 as ue,C as yt,aI as ce,y as he,p as de,M as Qt,r as R,z as j,L as Wt,f as vt,a1 as V,o as J,e as rt,j as te,aJ as fe,O as pe,_ as ve,aK as O,k as U,g as G,i as Lt,F as ge,h as gt,ai as me,n as xe,d as At,b as ye,ax as we}from"./modules/vue-Bl2l7_5U.js";import{X as be,a as _t,m as Dt,b as It,d as jt,Y as Nt,p as _e,Z as Se}from"./monaco/bundled-types-Cyvq5-7x.js";import{a as Et,j as wt,k as qt,o as Pe,l as Q,r as Ee,m as Me,d as Ce,i as $e,n as ke,_ as Mt,q as Le,t as Ae,v as De,w as Ie,x as je,y as Ne,z as qe}from"./index-0rbkrWEB.js";import{u as ze}from"./slidev/context-BAQLIszF.js";import{a as Te}from"./modules/file-saver-C8QSpN-3.js";let Fe=()=>({emit(t,...e){for(let s=this.events[t]||[],r=0,a=s.length;r<a;r++)s[r](...e)},events:{},on(t,e){return(this.events[t]||=[]).push(e),()=>{this.events[t]=this.events[t]?.filter(s=>e!==s)}}});function ft(t,e){return t-e}function Re(t){return t<0?-1:1}function pt(t){return[Math.abs(t),Re(t)]}function ee(){const t=()=>((1+Math.random())*65536|0).toString(16).substring(1);return`${t()+t()}-${t()}-${t()}-${t()}-${t()}${t()}${t()}`}const Xe=2,X=Xe;function ne(t,e){const s=document.createElementNS("http://www.w3.org/2000/svg","defs"),r=document.createElementNS("http://www.w3.org/2000/svg","marker"),a=document.createElementNS("http://www.w3.org/2000/svg","path");return a.setAttribute("fill",e),r.setAttribute("id",t),r.setAttribute("viewBox","0 -5 10 10"),r.setAttribute("refX","5"),r.setAttribute("refY","0"),r.setAttribute("markerWidth","4"),r.setAttribute("markerHeight","4"),r.setAttribute("orient","auto"),a.setAttribute("d","M0,-5L10,0L0,5"),r.appendChild(a),s.appendChild(r),s}function Ke(t,e){const s=t.x-e.x,r=t.y-e.y;return s*s+r*r}function Be(t,e,s){let r=e.x,a=e.y,l=s.x-r,f=s.y-a;if(l!==0||f!==0){const i=((t.x-r)*l+(t.y-a)*f)/(l*l+f*f);i>1?(r=s.x,a=s.y):i>0&&(r+=l*i,a+=f*i)}return l=t.x-r,f=t.y-a,l*l+f*f}function Oe(t,e){let s=t[0];const r=[s];let a;for(let l=1,f=t.length;l<f;l++)a=t[l],Ke(a,s)>e&&(r.push(a),s=a);return s!==a&&a&&r.push(a),r}function St(t,e,s,r,a){let l=r,f=0;for(let i=e+1;i<s;i++){const n=Be(t[i],t[e],t[s]);n>l&&(f=i,l=n)}l>r&&(f-e>1&&St(t,e,f,r,a),a.push(t[f]),s-f>1&&St(t,f,s,r,a))}function Ge(t,e){const s=t.length-1,r=[t[0]];return St(t,0,s,e,r),r.push(t[s]),r}function zt(t,e,s=!1){if(t.length<=2)return t;const r=e*e;return t=s?t:Oe(t,r),t=Ge(t,r),t}var W=class{constructor(t){this.drauu=t,this.event=void 0,this.point=void 0,this.start=void 0,this.el=null}onSelected(t){}onUnselected(){}onStart(t){}onMove(t){return!1}onEnd(t){}get brush(){return this.drauu.brush}get shiftPressed(){return this.drauu.shiftPressed}get altPressed(){return this.drauu.altPressed}get svgElement(){return this.drauu.el}getMousePosition(t){const e=this.drauu.el,s=this.drauu.options.cssZoom??1,r=this.drauu.options.coordinateScale??1,a=this.drauu.options.offset??{x:0,y:0};if(this.drauu.options.coordinateTransform===!1){const l=this.drauu.el.getBoundingClientRect();return{x:(t.pageX/s-l.left+a.x)*r,y:(t.pageY/s-l.top+a.y)*r,pressure:t.pressure}}else{const l=this.drauu.svgPoint;l.x=t.clientX/s+a.x,l.y=t.clientY/s+a.y;const f=l.matrixTransform(e.getScreenCTM()?.inverse());return{x:f.x*r,y:f.y*r,pressure:t.pressure}}}createElement(t,e){const s=document.createElementNS("http://www.w3.org/2000/svg",t),r=e?{...this.brush,...e}:this.brush;return s.setAttribute("fill",r.fill??"transparent"),s.setAttribute("stroke",r.color),s.setAttribute("stroke-width",r.size.toString()),s.setAttribute("stroke-linecap","round"),r.dasharray&&s.setAttribute("stroke-dasharray",r.dasharray),s}attr(t,e){this.el.setAttribute(t,typeof e=="string"?e:e.toFixed(X))}_setEvent(t){this.event=t,this.point=this.getMousePosition(t)}_eventDown(t){return this._setEvent(t),this.start=this.point,this.onStart(this.point)}_eventMove(t){return this._setEvent(t),this.onMove(this.point)}_eventUp(t){return this._setEvent(t),this.onEnd(this.point)}},Ue=class Z extends W{constructor(...e){super(...e),this.points=[],this.count=0}onStart(e){if(this.el=this.createElement("path",{fill:"transparent"}),this.points=[e],this.brush.arrowEnd){this.arrowId=ee();const s=ne(this.arrowId,this.brush.color);this.el.appendChild(s)}return this.el}onMove(e){return this.el||this.onStart(e),this.points[this.points.length-1]!==e&&(this.points.push(e),this.count+=1),this.count>5&&(this.points=zt(this.points,1,!0),this.count=0),this.attr("d",Z.toSvgData(this.points)),!0}onEnd(){const e=this.el;if(this.el=null,!e)return!1;if(e.setAttribute("d",Z.toSvgData(zt(this.points,1,!0))),!e.getTotalLength()){const{x:s,y:r}=this.points[0],a=this.brush.size/2;e.setAttribute("d",`M ${s-a} ${r} a ${a},${a} 0 1,0 ${a*2},0 a ${a},${a} 0 1,0 ${-a*2},0`),e.setAttribute("fill",this.brush.color),e.setAttribute("stroke-width","0")}return!0}static line(e,s){const r=s.x-e.x,a=s.y-e.y;return{length:Math.sqrt(r**2+a**2),angle:Math.atan2(a,r)}}static controlPoint(e,s,r,a){const l=s||e,f=r||e,i=.2,n=Z.line(l,f),u=n.angle+(a?Math.PI:0),d=n.length*i;return{x:e.x+Math.cos(u)*d,y:e.y+Math.sin(u)*d}}static bezierCommand(e,s,r){const a=Z.controlPoint(r[s-1],r[s-2],e),l=Z.controlPoint(e,r[s-1],r[s+1],!0);return`C ${a.x.toFixed(X)},${a.y.toFixed(X)} ${l.x.toFixed(X)},${l.y.toFixed(X)} ${e.x.toFixed(X)},${e.y.toFixed(X)}`}static toSvgData(e){return e.reduce((s,r,a,l)=>a===0?`M ${r.x.toFixed(X)},${r.y.toFixed(X)}`:`${s} ${Z.bezierCommand(r,a,l)}`,"")}},Ve=class extends W{onStart(t){return this.el=this.createElement("ellipse"),this.attr("cx",t.x),this.attr("cy",t.y),this.el}onMove(t){if(!this.el||!this.start)return!1;let[e,s]=pt(t.x-this.start.x),[r,a]=pt(t.y-this.start.y);if(this.shiftPressed){const l=Math.min(e,r);e=l,r=l}if(this.altPressed)this.attr("cx",this.start.x),this.attr("cy",this.start.y),this.attr("rx",e),this.attr("ry",r);else{const[l,f]=[this.start.x,this.start.x+e*s].sort(ft),[i,n]=[this.start.y,this.start.y+r*a].sort(ft);this.attr("cx",(l+f)/2),this.attr("cy",(i+n)/2),this.attr("rx",(f-l)/2),this.attr("ry",(n-i)/2)}return!0}onEnd(){const t=this.el;if(this.el=null,!t)return!1;try{if(!t.getTotalLength())return!1}catch{return!1}return!0}},He=class extends W{constructor(...t){super(...t),this.pathSubFactor=20,this.pathFragments=[],this._erased=[]}onSelected(t){const e=(s,r)=>{if(s&&s.length)for(let a=0;a<s.length;a++){const l=s[a];if(l.getTotalLength){const f=l.getTotalLength();for(let i=0;i<this.pathSubFactor;i++){const n=l.getPointAtLength(f*i/this.pathSubFactor),u=l.getPointAtLength(f*(i+1)/this.pathSubFactor);this.pathFragments.push({x1:n.x,x2:u.x,y1:n.y,y2:u.y,segment:i,element:r||l})}}else l.children&&e(l.children,l)}};t&&e(t.children)}onUnselected(){this.pathFragments=[]}onStart(t){this.svgPointPrevious=this.svgElement.createSVGPoint(),this.svgPointPrevious.x=t.x,this.svgPointPrevious.y=t.y}onMove(t){this.svgPointCurrent=this.svgElement.createSVGPoint(),this.svgPointCurrent.x=t.x,this.svgPointCurrent.y=t.y;const e=this.checkAndEraseElement();return this.svgPointPrevious=this.svgPointCurrent,e}onEnd(){this.svgPointPrevious=void 0,this.svgPointCurrent=void 0;const t=this._erased;return this._erased=[],{undo:()=>t.forEach(e=>this.drauu._restoreNode(e)),redo:()=>t.forEach(e=>this.drauu._removeNode(e))}}checkAndEraseElement(){if(this.pathFragments.length)for(let t=0;t<this.pathFragments.length;t++){const e=this.pathFragments[t];if(this.svgPointPrevious&&this.svgPointCurrent){const s={x1:this.svgPointPrevious.x,x2:this.svgPointCurrent.x,y1:this.svgPointPrevious.y,y2:this.svgPointCurrent.y};this.lineLineIntersect(e,s)&&(this.drauu._removeNode(e.element),this._erased.push(e.element))}}return this._erased.length&&(this.pathFragments=this.pathFragments.filter(t=>!this._erased.includes(t.element))),this._erased.length>0}lineLineIntersect(t,e){const s=t.x1,r=t.x2,a=e.x1,l=e.x2,f=t.y1,i=t.y2,n=e.y1,u=e.y2,d=(s-r)*(n-u)-(f-i)*(a-l),o=(s*i-f*r)*(a-l)-(s-r)*(a*u-n*l),c=(s*i-f*r)*(n-u)-(f-i)*(a*u-n*l),h=(p,x,y)=>p>=x&&p<=y?!0:p>=y&&p<=x;if(d===0)return!1;{const p={x:o/d,y:c/d};return h(p.x,s,r)&&h(p.y,f,i)&&h(p.x,a,l)&&h(p.y,n,u)}}},Ze=class extends W{onStart(t){if(this.el=this.createElement("line",{fill:"transparent"}),this.attr("x1",t.x),this.attr("y1",t.y),this.attr("x2",t.x),this.attr("y2",t.y),this.brush.arrowEnd){const e=ee(),s=document.createElementNS("http://www.w3.org/2000/svg","g");return s.append(ne(e,this.brush.color)),s.append(this.el),this.attr("marker-end",`url(#${e})`),s}return this.el}onMove(t){if(!this.el)return!1;let{x:e,y:s}=t;if(this.shiftPressed){const r=t.x-this.start.x,a=t.y-this.start.y;if(a!==0){let l=r/a;l=Math.round(l),Math.abs(l)<=1?(e=this.start.x+a*l,s=this.start.y+a):(e=this.start.x+r,s=this.start.y)}}return this.altPressed?(this.attr("x1",this.start.x*2-e),this.attr("y1",this.start.y*2-s),this.attr("x2",e),this.attr("y2",s)):(this.attr("x1",this.start.x),this.attr("y1",this.start.y),this.attr("x2",e),this.attr("y2",s)),!0}onEnd(){const t=this.el;if(this.el=null,!t)return!1;try{if(t.getTotalLength()<5)return!1}catch{return!1}return!0}},Ye=class extends W{onStart(t){return this.el=this.createElement("rect"),this.brush.cornerRadius&&(this.attr("rx",this.brush.cornerRadius),this.attr("ry",this.brush.cornerRadius)),this.attr("x",t.x),this.attr("y",t.y),this.el}onMove(t){if(!this.el||!this.start)return!1;let[e,s]=pt(t.x-this.start.x),[r,a]=pt(t.y-this.start.y);if(this.shiftPressed){const l=Math.min(e,r);e=l,r=l}if(this.altPressed)this.attr("x",this.start.x-e),this.attr("y",this.start.y-r),this.attr("width",e*2),this.attr("height",r*2);else{const[l,f]=[this.start.x,this.start.x+e*s].sort(ft),[i,n]=[this.start.y,this.start.y+r*a].sort(ft);this.attr("x",l),this.attr("y",i),this.attr("width",f-l),this.attr("height",n-i)}return!0}onEnd(){const t=this.el;if(this.el=null,!t)return!1;try{if(!t.getTotalLength())return!1}catch{return!1}return!0}};function Tt(t,e,s,r=a=>a){return t*r(.5-e*(.5-s))}function Je(t){return[-t[0],-t[1]]}function T(t,e){return[t[0]+e[0],t[1]+e[1]]}function q(t,e){return[t[0]-e[0],t[1]-e[1]]}function z(t,e){return[t[0]*e,t[1]*e]}function Qe(t,e){return[t[0]/e,t[1]/e]}function et(t){return[t[1],-t[0]]}function Ft(t,e){return t[0]*e[0]+t[1]*e[1]}function We(t,e){return t[0]===e[0]&&t[1]===e[1]}function tn(t){return Math.hypot(t[0],t[1])}function en(t){return t[0]*t[0]+t[1]*t[1]}function Rt(t,e){return en(q(t,e))}function se(t){return Qe(t,tn(t))}function nn(t,e){return Math.hypot(t[1]-e[1],t[0]-e[0])}function nt(t,e,s){let r=Math.sin(s),a=Math.cos(s),l=t[0]-e[0],f=t[1]-e[1],i=l*a-f*r,n=l*r+f*a;return[i+e[0],n+e[1]]}function Pt(t,e,s){return T(t,z(q(e,t),s))}function Xt(t,e,s){return T(t,z(e,s))}var{min:Y,PI:sn}=Math,Kt=.275,st=sn+1e-4;function rn(t,e={}){let{size:s=16,smoothing:r=.5,thinning:a=.5,simulatePressure:l=!0,easing:f=b=>b,start:i={},end:n={},last:u=!1}=e,{cap:d=!0,easing:o=b=>b*(2-b)}=i,{cap:c=!0,easing:h=b=>--b*b*b+1}=n;if(t.length===0||s<=0)return[];let p=t[t.length-1].runningLength,x=i.taper===!1?0:i.taper===!0?Math.max(s,p):i.taper,y=n.taper===!1?0:n.taper===!0?Math.max(s,p):n.taper,_=Math.pow(s*r,2),w=[],g=[],v=t.slice(0,10).reduce((b,I)=>{let M=I.pressure;if(l){let C=Y(1,I.distance/s);M=Y(1,b+(Y(1,1-C)-b)*(C*Kt))}return(b+M)/2},t[0].pressure),m=Tt(s,a,t[t.length-1].pressure,f),P,S=t[0].vector,E=t[0].point,A=E,k=E,$=A,N=!1;for(let b=0;b<t.length;b++){let{pressure:I}=t[b],{point:M,vector:C,distance:ie,runningLength:tt}=t[b];if(b<t.length-1&&p-tt<3)continue;if(a){if(l){let B=Y(1,ie/s),xt=Y(1,1-B);I=Y(1,v+(xt-v)*(B*Kt))}m=Tt(s,a,I,f)}else m=s/2;P===void 0&&(P=m);let oe=tt<x?o(tt/x):1,ae=p-tt<y?h((p-tt)/y):1;m=Math.max(.01,m*Math.min(oe,ae));let Ct=(b<t.length-1?t[b+1]:t[b]).vector,mt=b<t.length-1?Ft(C,Ct):1,le=Ft(C,S)<0&&!N,$t=mt!==null&&mt<0;if(le||$t){let B=z(et(S),m);for(let xt=1/13,it=0;it<=1;it+=xt)k=nt(q(M,B),M,st*it),w.push(k),$=nt(T(M,B),M,st*-it),g.push($);E=k,A=$,$t&&(N=!0);continue}if(N=!1,b===t.length-1){let B=z(et(C),m);w.push(q(M,B)),g.push(T(M,B));continue}let kt=z(et(Pt(Ct,C,mt)),m);k=q(M,kt),(b<=1||Rt(E,k)>_)&&(w.push(k),E=k),$=T(M,kt),(b<=1||Rt(A,$)>_)&&(g.push($),A=$),v=I,S=C}let L=t[0].point.slice(0,2),D=t.length>1?t[t.length-1].point.slice(0,2):T(t[0].point,[1,1]),K=[],F=[];if(t.length===1){if(!(x||y)||u){let b=Xt(L,se(et(q(L,D))),-(P||m)),I=[];for(let M=1/13,C=M;C<=1;C+=M)I.push(nt(b,L,st*2*C));return I}}else{if(!(x||y&&t.length===1))if(d)for(let I=1/13,M=I;M<=1;M+=I){let C=nt(g[0],L,st*M);K.push(C)}else{let I=q(w[0],g[0]),M=z(I,.5),C=z(I,.51);K.push(q(L,M),q(L,C),T(L,C),T(L,M))}let b=et(Je(t[t.length-1].vector));if(y||x&&t.length===1)F.push(D);else if(c){let I=Xt(D,b,m);for(let M=1/29,C=M;C<1;C+=M)F.push(nt(I,D,st*3*C))}else F.push(T(D,z(b,m)),T(D,z(b,m*.99)),q(D,z(b,m*.99)),q(D,z(b,m)))}return w.concat(F,g.reverse(),K)}function on(t,e={}){var s;let{streamline:r=.5,size:a=16,last:l=!1}=e;if(t.length===0)return[];let f=.15+(1-r)*.85,i=Array.isArray(t[0])?t:t.map(({x:h,y:p,pressure:x=.5})=>[h,p,x]);if(i.length===2){let h=i[1];i=i.slice(0,-1);for(let p=1;p<5;p++)i.push(Pt(i[0],h,p/4))}i.length===1&&(i=[...i,[...T(i[0],[1,1]),...i[0].slice(2)]]);let n=[{point:[i[0][0],i[0][1]],pressure:i[0][2]>=0?i[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],u=!1,d=0,o=n[0],c=i.length-1;for(let h=1;h<i.length;h++){let p=l&&h===c?i[h].slice(0,2):Pt(o.point,i[h],f);if(We(o.point,p))continue;let x=nn(p,o.point);if(d+=x,h<c&&!u){if(d<a)continue;u=!0}o={point:p,pressure:i[h][2]>=0?i[h][2]:.5,vector:se(q(o.point,p)),distance:x,runningLength:d},n.push(o)}return n[0].vector=((s=n[1])==null?void 0:s.vector)||[0,0],n}function an(t,e={}){return rn(on(t,e),e)}var ln=class re extends W{constructor(...e){super(...e),this.points=[]}onStart(e){return this.el=document.createElementNS("http://www.w3.org/2000/svg","path"),this.points=[e],this.attr("fill",this.brush.color),this.attr("d",this.getSvgData(this.points)),this.el}onMove(e){return this.el||this.onStart(e),this.points[this.points.length-1]!==e&&this.points.push(e),this.attr("d",this.getSvgData(this.points)),!0}onEnd(){const e=this.el;return this.el=null,!!e}getSvgData(e){return re.getSvgData(e,this.brush)}static getSvgData(e,s){const r=an(e,{size:s.size,thinning:.9,simulatePressure:!1,start:{taper:5},end:{taper:5},...s.stylusOptions});if(!r.length)return"";const a=r.reduce((l,[f,i],n,u)=>{const[d,o]=u[(n+1)%u.length];return l.push(f,i,(f+d)/2,(i+o)/2),l},["M",...r[0],"Q"]);return a.push("Z"),a.map(l=>typeof l=="number"?l.toFixed(2):l).join(" ")}};function un(t){return{draw:new Ue(t),stylus:new ln(t),line:new Ze(t),rectangle:new Ye(t),ellipse:new Ve(t),eraseLine:new He(t)}}var cn=class{constructor(t={}){this.options=t,this.el=null,this.svgPoint=null,this.eventEl=null,this.shiftPressed=!1,this.altPressed=!1,this.drawing=!1,this._emitter=Fe(),this._originalPointerId=null,this._models=un(this),this._opStack=[],this._opIndex=0,this._disposables=[],this._elements=[],this.options.brush||(this.options.brush={color:"black",size:3,mode:"stylus"}),t.el&&this.mount(t.el,t.eventTarget,t.window)}get model(){return this._models[this.mode]}get mounted(){return!!this.el}get mode(){return this.options.brush.mode||"stylus"}set mode(t){this._models[this.mode].onUnselected(),this.options.brush.mode=t,this.model.onSelected(this.el)}get brush(){return this.options.brush}set brush(t){this.options.brush=t}resolveSelector(t){return typeof t=="string"?document.querySelector(t):t||null}mount(t,e,s=window){if(this.el)throw new Error("[drauu] already mounted, unmount previous target first");if(this.el=this.resolveSelector(t),!this.el)throw new Error("[drauu] target element not found");if(this.el.tagName.toLocaleLowerCase()!=="svg")throw new Error("[drauu] can only mount to a SVG element");if(!this.el.createSVGPoint)throw new Error("[drauu] SVG element must be create by document.createElementNS('http://www.w3.org/2000/svg', 'svg')");this.svgPoint=this.el.createSVGPoint();const r=this.resolveSelector(e)||this.el,a=this.eventStart.bind(this),l=this.eventMove.bind(this),f=this.eventEnd.bind(this),i=this.eventKeyboard.bind(this),n=this.touchMove.bind(this);r.addEventListener("pointerdown",a,{passive:!1}),s.addEventListener("pointermove",l,{passive:!1}),s.addEventListener("pointerup",f,{passive:!1}),s.addEventListener("pointercancel",f,{passive:!1}),s.addEventListener("keydown",i,!1),s.addEventListener("keyup",i,!1),s.addEventListener("touchmove",n,{passive:!1}),this._disposables.push(()=>{r.removeEventListener("pointerdown",a),s.removeEventListener("pointermove",l),s.removeEventListener("pointerup",f),s.removeEventListener("pointercancel",f),s.removeEventListener("keydown",i,!1),s.removeEventListener("keyup",i,!1),s.removeEventListener("touchmove",n)}),this._emitter.emit("mounted")}unmount(){this._disposables.forEach(t=>t()),this._disposables.length=0,this._elements.length=0,this.el=null,this._emitter.emit("unmounted")}on(t,e){return this._emitter.on(t,e)}undo(){return!this.canUndo()||this.drawing?!1:(this._opStack[--this._opIndex].undo(),this._emitter.emit("changed"),!0)}redo(){return!this.canRedo()||this.drawing?!1:(this._opStack[this._opIndex++].redo(),this._emitter.emit("changed"),!0)}canRedo(){return this._opIndex<this._opStack.length}canUndo(){return this._opIndex>0}eventMove(t){!this.acceptsInput(t)||!this.drawing||this.model._eventMove(t)&&(t.stopPropagation(),t.preventDefault(),this._emitter.emit("changed"))}eventStart(t){this.acceptsInput(t)&&(t.stopPropagation(),t.preventDefault(),this._currentNode&&this.cancel(),this.drawing=!0,this._originalPointerId=t.pointerId,this._emitter.emit("start"),this._currentNode=this.model._eventDown(t),this._currentNode&&this.mode!=="eraseLine"&&this.el.appendChild(this._currentNode),this._emitter.emit("changed"))}eventEnd(t){if(!this.acceptsInput(t)||!this.drawing)return;const e=this.model._eventUp(t);if(!e)this.cancel();else if(e===!0){const s=this._currentNode;s&&(this._appendNode(s),this.commit({undo:()=>this._removeNode(s),redo:()=>this._restoreNode(s)}))}else this.commit(e);this.drawing=!1,this._emitter.emit("end"),this._emitter.emit("changed"),this._originalPointerId=null}touchMove(t){Array.from(t.touches).some(e=>e.touchType==="stylus"&&e.identifier===this._originalPointerId)&&t.preventDefault()}acceptsInput(t){return(!this.options.acceptsInputTypes||this.options.acceptsInputTypes.includes(t.pointerType))&&!(this._originalPointerId&&this._originalPointerId!==t.pointerId)}eventKeyboard(t){this.shiftPressed===t.shiftKey&&this.altPressed===t.altKey||(this.shiftPressed=t.shiftKey,this.altPressed=t.altKey,this.model.point&&this.model.onMove(this.model.point)&&this._emitter.emit("changed"))}commit(t){this._opStack.length=this._opIndex,this._opStack.push(t),this._opIndex++;const e=this._currentNode;this._currentNode=void 0,this._emitter.emit("committed",e)}clear(){this._opStack.length=0,this._opIndex=0,this._elements=[],this.cancel(),this.el.innerHTML="",this._emitter.emit("changed")}cancel(){this._currentNode&&(this.el.removeChild(this._currentNode),this._currentNode=void 0,this._emitter.emit("canceled"))}dump(){return this.el.innerHTML}load(t){this.clear(),this.el.innerHTML=t}_appendNode(t){const e=this._elements.at(-1);e?e.after(t):this.el.append(t);const s=this._elements.push(t)-1;t.dataset.drauu_index=s.toString()}_removeNode(t){t.remove(),this._elements[+t.dataset.drauu_index]=null}_restoreNode(t){const e=+t.dataset.drauu_index;this._elements[e]=t;for(let s=e-1;s>=0;s--){const r=this._elements[s];if(r){r.after(t);return}}this.el.prepend(t)}};function hn(t){return new cn(t)}const dn=ue(()=>{const{currentSlideNo:t,isPresenter:e}=Et(),s=["#ff595e","#ffca3a","#8ac926","#1982c4","#6a4c93","#ffffff","#000000"],r=yt("slidev-drawing-enabled",!1),a=yt("slidev-drawing-pinned",!1),l=ce(yt("slidev-drawing-brush",{color:s[0],size:4,mode:"stylus"})),f=R(!1),i=R(!1),n=R(!1),u=R(!1),d=R("stylus"),o=j(()=>_t.drawings.syncAll||e.value);let c=!1;const h=j({get(){return d.value},set(g){d.value=g,g==="arrow"?(x.mode="line",l.arrowEnd=!0):(x.mode=g,l.arrowEnd=!1)}}),p=Wt({brush:l,acceptsInputTypes:j(()=>r.value&&(!_t.drawings.presenterOnly||e.value)?void 0:["pen"]),coordinateTransform:!1}),x=he(hn(p));function y(){x.clear(),o.value&&qt(t.value,"")}function _(){n.value=x.canRedo(),i.value=x.canUndo(),u.value=!!x.el?.children.length}function w(g){c=!0;const v=wt[g||t.value];v!=null?x.load(v):x.clear(),_(),c=!1}return x.on("changed",()=>{if(_(),!c){const g=x.dump(),v=t.value;(wt[v]||"")!==g&&o.value&&qt(v,x.dump())}}),Pe(g=>{c=!0,g[t.value]!=null&&x.load(g[t.value]||""),c=!1,_()}),de(()=>{Qt(t,()=>{x.mounted&&w()},{immediate:!0})}),x.on("start",()=>f.value=!0),x.on("end",()=>f.value=!1),window.addEventListener("keydown",g=>{if(!r.value||be.value)return;const v=!g.ctrlKey&&!g.altKey&&!g.shiftKey&&!g.metaKey;let m=!0;g.code==="KeyZ"&&(g.ctrlKey||g.metaKey)?g.shiftKey?x.redo():x.undo():g.code==="Escape"?r.value=!1:g.code==="KeyL"&&v?h.value="line":g.code==="KeyA"&&v?h.value="arrow":g.code==="KeyS"&&v?h.value="stylus":g.code==="KeyR"&&v?h.value="rectangle":g.code==="KeyE"&&v?h.value="ellipse":g.code==="KeyC"&&v?y():g.code.startsWith("Digit")&&v&&+g.code[5]<=s.length?l.color=s[+g.code[5]-1]:m=!1,m&&(g.preventDefault(),g.stopPropagation())},!1),{brush:l,brushColors:s,canClear:u,canRedo:n,canUndo:i,clear:y,drauu:x,drauuOptions:p,drawingEnabled:r,drawingMode:h,drawingPinned:a,drawingState:wt,isDrawing:f,loadCanvas:w}}),fn=["innerHTML"],rs=vt({__name:"DrawingPreview",props:{page:{}},setup(t){const{drawingState:e}=dn();return(s,r)=>V(e)[t.page]?(J(),rt("svg",{key:0,class:"w-full h-full absolute top-0 pointer-events-none",innerHTML:V(e)[t.page]},null,8,fn)):te("v-if",!0)}}),H=Wt({});let pn=[],vn=[];Q(H,"$syncUp",!0);Q(H,"$syncDown",!0);Q(H,"$paused",!1);Q(H,"$onSet",t=>pn.push(t));Q(H,"$onPatch",t=>vn.push(t));Ee();Q(H,"$patch",async()=>!1);const gn=Me(H,H,!0);window.navigator.userAgent.match(/Chrome\/(\d+)/)?.[1];window.navigator.userAgent.match(/Chrome\/(\d+)/)?.[1];class mn{constructor(){this._screenshotSession=null}getSnapshot(e,s){const r=e+(s?"-dark":"-light"),a=gn.state[r];if(!a)return;const l=Ce(e);if(l&&a?.revision===l?.meta.slide.revision)return a.image}async saveSnapshot(e,s,r){return!1}async startCapturing(e){return!1}}const xn=new mn,yn=["id"],wn=["id"],bn={class:"slidev-slide-container w-full h-full relative"},_n=["src"],Sn=vt({__name:"SlideContainer",props:{width:{type:Number},meta:{default:()=>({})},isMain:{type:Boolean,default:!1},no:{type:Number,required:!1},useSnapshot:{type:Boolean,default:!1},contentStyle:{type:Object,default:()=>({})}},setup(t){const e=t,{isPrintMode:s}=Et(),r=R(null),a=fe(r),l=R(null),f=j(()=>e.width??a.width.value),i=j(()=>e.width?e.width/Nt.value:a.height.value),n=j(()=>Dt.value&&!s.value?+Dt.value:Math.min(f.value/It.value,i.value/jt.value)),u=j(()=>({...e.contentStyle,height:`${jt.value}px`,width:`${It.value}px`,"--slidev-slide-scale":n.value})),d=j(()=>e.width?{width:`${e.width}px`,height:`${e.width/Nt.value}px`}:{});if(e.isMain){const c=document.documentElement.style;pe(()=>c.setProperty("--slidev-slide-scale",n.value.toString())),ve(()=>c.removeProperty("--slidev-slide-scale"))}O($e,n),O(ke,l);const o=j(()=>{if(!(e.no==null||!e.useSnapshot))return xn.getSnapshot(e.no,_e.value)});return(c,h)=>o.value?(J(),rt(ge,{key:1},[te(" Image Snapshot "),G("div",bn,[G("img",{src:o.value,class:"w-full h-full object-cover",style:U(d.value)},null,12,_n),h[0]||(h[0]=G("div",{absolute:"","bottom-1":"","right-1":"","p0.5":"","text-cyan:75":"","bg-cyan:10":"",rounded:"",title:"Snapshot"},[G("div",{class:"i-carbon-camera"})],-1))])],2112)):(J(),rt("div",{key:0,id:t.isMain?"slide-container":void 0,ref_key:"container",ref:r,class:"slidev-slide-container",style:U(d.value)},[G("div",{id:t.isMain?"slide-content":void 0,ref_key:"slideElement",ref:l,class:"slidev-slide-content",style:U(u.value)},[Lt(c.$slots,"default",{},void 0,!0)],12,wn),Lt(c.$slots,"controls",{},void 0,!0)],12,yn))}}),is=Mt(Sn,[["__scopeId","data-v-36b3d80f"]]);var ot={exports:{}},Pn=ot.exports,Bt;function En(){return Bt||(Bt=1,(function(t){(function(e,s,r){function a(n){var u=this,d=i();u.next=function(){var o=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=o-(u.c=o|0)},u.c=1,u.s0=d(" "),u.s1=d(" "),u.s2=d(" "),u.s0-=d(n),u.s0<0&&(u.s0+=1),u.s1-=d(n),u.s1<0&&(u.s1+=1),u.s2-=d(n),u.s2<0&&(u.s2+=1),d=null}function l(n,u){return u.c=n.c,u.s0=n.s0,u.s1=n.s1,u.s2=n.s2,u}function f(n,u){var d=new a(n),o=u&&u.state,c=d.next;return c.int32=function(){return d.next()*4294967296|0},c.double=function(){return c()+(c()*2097152|0)*11102230246251565e-32},c.quick=c,o&&(typeof o=="object"&&l(o,d),c.state=function(){return l(d,{})}),c}function i(){var n=4022871197,u=function(d){d=String(d);for(var o=0;o<d.length;o++){n+=d.charCodeAt(o);var c=.02519603282416938*n;n=c>>>0,c-=n,c*=n,n=c>>>0,c-=n,n+=c*4294967296}return(n>>>0)*23283064365386963e-26};return u}s&&s.exports?s.exports=f:this.alea=f})(Pn,t)})(ot)),ot.exports}var at={exports:{}},Mn=at.exports,Ot;function Cn(){return Ot||(Ot=1,(function(t){(function(e,s,r){function a(i){var n=this,u="";n.x=0,n.y=0,n.z=0,n.w=0,n.next=function(){var o=n.x^n.x<<11;return n.x=n.y,n.y=n.z,n.z=n.w,n.w^=n.w>>>19^o^o>>>8},i===(i|0)?n.x=i:u+=i;for(var d=0;d<u.length+64;d++)n.x^=u.charCodeAt(d)|0,n.next()}function l(i,n){return n.x=i.x,n.y=i.y,n.z=i.z,n.w=i.w,n}function f(i,n){var u=new a(i),d=n&&n.state,o=function(){return(u.next()>>>0)/4294967296};return o.double=function(){do var c=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(c+h)/(1<<21);while(p===0);return p},o.int32=u.next,o.quick=o,d&&(typeof d=="object"&&l(d,u),o.state=function(){return l(u,{})}),o}s&&s.exports?s.exports=f:this.xor128=f})(Mn,t)})(at)),at.exports}var lt={exports:{}},$n=lt.exports,Gt;function kn(){return Gt||(Gt=1,(function(t){(function(e,s,r){function a(i){var n=this,u="";n.next=function(){var o=n.x^n.x>>>2;return n.x=n.y,n.y=n.z,n.z=n.w,n.w=n.v,(n.d=n.d+362437|0)+(n.v=n.v^n.v<<4^(o^o<<1))|0},n.x=0,n.y=0,n.z=0,n.w=0,n.v=0,i===(i|0)?n.x=i:u+=i;for(var d=0;d<u.length+64;d++)n.x^=u.charCodeAt(d)|0,d==u.length&&(n.d=n.x<<10^n.x>>>4),n.next()}function l(i,n){return n.x=i.x,n.y=i.y,n.z=i.z,n.w=i.w,n.v=i.v,n.d=i.d,n}function f(i,n){var u=new a(i),d=n&&n.state,o=function(){return(u.next()>>>0)/4294967296};return o.double=function(){do var c=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(c+h)/(1<<21);while(p===0);return p},o.int32=u.next,o.quick=o,d&&(typeof d=="object"&&l(d,u),o.state=function(){return l(u,{})}),o}s&&s.exports?s.exports=f:this.xorwow=f})($n,t)})(lt)),lt.exports}var ut={exports:{}},Ln=ut.exports,Ut;function An(){return Ut||(Ut=1,(function(t){(function(e,s,r){function a(i){var n=this;n.next=function(){var d=n.x,o=n.i,c,h;return c=d[o],c^=c>>>7,h=c^c<<24,c=d[o+1&7],h^=c^c>>>10,c=d[o+3&7],h^=c^c>>>3,c=d[o+4&7],h^=c^c<<7,c=d[o+7&7],c=c^c<<13,h^=c^c<<9,d[o]=h,n.i=o+1&7,h};function u(d,o){var c,h=[];if(o===(o|0))h[0]=o;else for(o=""+o,c=0;c<o.length;++c)h[c&7]=h[c&7]<<15^o.charCodeAt(c)+h[c+1&7]<<13;for(;h.length<8;)h.push(0);for(c=0;c<8&&h[c]===0;++c);for(c==8?h[7]=-1:h[c],d.x=h,d.i=0,c=256;c>0;--c)d.next()}u(n,i)}function l(i,n){return n.x=i.x.slice(),n.i=i.i,n}function f(i,n){i==null&&(i=+new Date);var u=new a(i),d=n&&n.state,o=function(){return(u.next()>>>0)/4294967296};return o.double=function(){do var c=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(c+h)/(1<<21);while(p===0);return p},o.int32=u.next,o.quick=o,d&&(d.x&&l(d,u),o.state=function(){return l(u,{})}),o}s&&s.exports?s.exports=f:this.xorshift7=f})(Ln,t)})(ut)),ut.exports}var ct={exports:{}},Dn=ct.exports,Vt;function In(){return Vt||(Vt=1,(function(t){(function(e,s,r){function a(i){var n=this;n.next=function(){var d=n.w,o=n.X,c=n.i,h,p;return n.w=d=d+1640531527|0,p=o[c+34&127],h=o[c=c+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,p=o[c]=p^h,n.i=c,p+(d^d>>>16)|0};function u(d,o){var c,h,p,x,y,_=[],w=128;for(o===(o|0)?(h=o,o=null):(o=o+"\0",h=0,w=Math.max(w,o.length)),p=0,x=-32;x<w;++x)o&&(h^=o.charCodeAt((x+32)%o.length)),x===0&&(y=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,x>=0&&(y=y+1640531527|0,c=_[x&127]^=h+y,p=c==0?p+1:0);for(p>=128&&(_[(o&&o.length||0)&127]=-1),p=127,x=512;x>0;--x)h=_[p+34&127],c=_[p=p+1&127],h^=h<<13,c^=c<<17,h^=h>>>15,c^=c>>>12,_[p]=h^c;d.w=y,d.X=_,d.i=p}u(n,i)}function l(i,n){return n.i=i.i,n.w=i.w,n.X=i.X.slice(),n}function f(i,n){i==null&&(i=+new Date);var u=new a(i),d=n&&n.state,o=function(){return(u.next()>>>0)/4294967296};return o.double=function(){do var c=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(c+h)/(1<<21);while(p===0);return p},o.int32=u.next,o.quick=o,d&&(d.X&&l(d,u),o.state=function(){return l(u,{})}),o}s&&s.exports?s.exports=f:this.xor4096=f})(Dn,t)})(ct)),ct.exports}var ht={exports:{}},jn=ht.exports,Ht;function Nn(){return Ht||(Ht=1,(function(t){(function(e,s,r){function a(i){var n=this,u="";n.next=function(){var o=n.b,c=n.c,h=n.d,p=n.a;return o=o<<25^o>>>7^c,c=c-h|0,h=h<<24^h>>>8^p,p=p-o|0,n.b=o=o<<20^o>>>12^c,n.c=c=c-h|0,n.d=h<<16^c>>>16^p,n.a=p-o|0},n.a=0,n.b=0,n.c=-1640531527,n.d=1367130551,i===Math.floor(i)?(n.a=i/4294967296|0,n.b=i|0):u+=i;for(var d=0;d<u.length+20;d++)n.b^=u.charCodeAt(d)|0,n.next()}function l(i,n){return n.a=i.a,n.b=i.b,n.c=i.c,n.d=i.d,n}function f(i,n){var u=new a(i),d=n&&n.state,o=function(){return(u.next()>>>0)/4294967296};return o.double=function(){do var c=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(c+h)/(1<<21);while(p===0);return p},o.int32=u.next,o.quick=o,d&&(typeof d=="object"&&l(d,u),o.state=function(){return l(u,{})}),o}s&&s.exports?s.exports=f:this.tychei=f})(jn,t)})(ht)),ht.exports}var dt={exports:{}},qn=dt.exports,Zt;function zn(){return Zt||(Zt=1,(function(t){(function(e,s,r){var a=256,l=6,f=52,i="random",n=r.pow(a,l),u=r.pow(2,f),d=u*2,o=a-1,c;function h(v,m,P){var S=[];m=m==!0?{entropy:!0}:m||{};var E=_(y(m.entropy?[v,g(s)]:v??w(),3),S),A=new p(S),k=function(){for(var $=A.g(l),N=n,L=0;$<u;)$=($+L)*a,N*=a,L=A.g(1);for(;$>=d;)$/=2,N/=2,L>>>=1;return($+L)/N};return k.int32=function(){return A.g(4)|0},k.quick=function(){return A.g(4)/4294967296},k.double=k,_(g(A.S),s),(m.pass||P||function($,N,L,D){return D&&(D.S&&x(D,A),$.state=function(){return x(A,{})}),L?(r[i]=$,N):$})(k,E,"global"in m?m.global:this==r,m.state)}function p(v){var m,P=v.length,S=this,E=0,A=S.i=S.j=0,k=S.S=[];for(P||(v=[P++]);E<a;)k[E]=E++;for(E=0;E<a;E++)k[E]=k[A=o&A+v[E%P]+(m=k[E])],k[A]=m;(S.g=function($){for(var N,L=0,D=S.i,K=S.j,F=S.S;$--;)N=F[D=o&D+1],L=L*a+F[o&(F[D]=F[K=o&K+N])+(F[K]=N)];return S.i=D,S.j=K,L})(a)}function x(v,m){return m.i=v.i,m.j=v.j,m.S=v.S.slice(),m}function y(v,m){var P=[],S=typeof v,E;if(m&&S=="object")for(E in v)try{P.push(y(v[E],m-1))}catch{}return P.length?P:S=="string"?v:v+"\0"}function _(v,m){for(var P=v+"",S,E=0;E<P.length;)m[o&E]=o&(S^=m[o&E]*19)+P.charCodeAt(E++);return g(m)}function w(){try{var v;return c&&(v=c.randomBytes)?v=v(a):(v=new Uint8Array(a),(e.crypto||e.msCrypto).getRandomValues(v)),g(v)}catch{var m=e.navigator,P=m&&m.plugins;return[+new Date,e,P,e.screen,g(s)]}}function g(v){return String.fromCharCode.apply(0,v)}if(_(r.random(),s),t.exports){t.exports=h;try{c=Se}catch{}}else r["seed"+i]=h})(typeof self<"u"?self:qn,[],Math)})(dt)),dt.exports}var bt,Yt;function Tn(){if(Yt)return bt;Yt=1;var t=En(),e=Cn(),s=kn(),r=An(),a=In(),l=Nn(),f=zn();return f.alea=t,f.xor128=e,f.xorwow=s,f.xorshift7=r,f.xor4096=a,f.tychei=l,bt=f,bt}var Fn=Tn();const Rn=Te(Fn),Jt=.3,Xn=.3,Kn=.3,Bn=vt({__name:"global-bottom",setup(t){ze();const{currentSlideRoute:e}=Et(),s=j(()=>e.value.meta?.slide?.frontmatter||{}),r=j(()=>s.value.glow||"full"),a=j(()=>+(s.value.glowOpacity||.4)),l=j(()=>+(s.value.glowHue||0)),f=j(()=>s.value.glowSeed==="false"||s.value.glowSeed===!1?Date.now().toString():s.value.glowSeed||"default");function i(h){let y=[-.2,1.2],_=[-.2,1.2];function w(v,m){return[Math.max(v[0],m[0]),Math.min(v[1],m[1])]}const g=h.split("-");for(const v of g)switch(v){case"top":_=w(_,[-.2,.6]);break;case"bottom":_=w(_,[.4,1.2]);break;case"left":y=w(y,[-.2,.6]);break;case"right":y=w(y,[.4,1.2]);break;case"xcenter":y=w(y,[.25,.75]);break;case"ycenter":_=w(_,[.25,.75]);break;case"center":y=w(y,[.25,.75]),_=w(_,[.25,.75]);break;case"full":y=w(y,[0,1]),_=w(_,[0,1]);break}return{x:y,y:_}}function n([h,p],[x,y]){return(x-h)**2+(y-p)**2}function u(h=16){function p(){const w=i(r.value),g=Rn(`${f.value}-${e.value.no}`);function v([P,S]){return g()*(S-P)+P}function m(P,S){return P=P*(1+S*2)-S,g()<Kn?P+(g()-.5)*Xn:P}return Array.from({length:h}).fill(0).map(()=>[m(v(w.x),Jt),m(v(w.y),Jt)])}const x=R(p()),y=j(()=>x.value.map(([w,g])=>`${w*100}% ${g*100}%`).join(", "));function _(){const w=new Set(p());x.value=x.value.map(g=>{let v=Number.POSITIVE_INFINITY,m;for(const P of w){const S=n(g,P);S<v&&(v=S,m=P)}return w.delete(m),m})}return Qt(e,()=>{_()}),y}const d=u(10),o=u(6),c=u(3);return(h,p)=>(J(),rt("div",{class:"bg transform-gpu overflow-hidden pointer-events-none",style:U({filter:`blur(70px) hue-rotate(${l.value}deg)`}),"aria-hidden":"true"},[G("div",{class:"clip bg-gradient-to-r from-[#2f96ad] to-white/10",style:U({"clip-path":`polygon(${V(d)})`,opacity:a.value})},null,4),G("div",{class:"clip bg-gradient-to-l from-[#4B32C3] to-white/10",style:U({"clip-path":`polygon(${V(o)})`,opacity:a.value})},null,4),G("div",{class:"clip bg-gradient-to-t from-[#8080f2] to-white/10",style:U({"clip-path":`polygon(${V(c)})`,opacity:.2})},null,4)],4))}}),On=Mt(Bn,[["__scopeId","data-v-1331230c"]]),Gn=[Object.values([])[0],Object.values([])[0]].filter(Boolean),os={render:()=>Gn.map(t=>gt(t))},Un=[Object.values([])[0],Object.values([On])[0]].filter(Boolean),as={render:()=>Un.map(t=>gt(t))},Vn=[Object.values([])[0],Object.values([])[0]].filter(Boolean),Hn={render:()=>Vn.map(t=>gt(t))},Zn=[Object.values([])[0],Object.values([])[0]].filter(Boolean),Yn={render:()=>Zn.map(t=>gt(t))},Jn=["data-slidev-no","lang"],Qn=vt({__name:"SlideWrapper",props:{clicksContext:{type:Object,required:!0},renderContext:{type:String,default:"slide"},route:{type:Object,required:!0}},setup(t){const e=t,s=j(()=>e.route.meta?.slide?.frontmatter.zoom??1);O(Le,e.route),O(Ae,e.route.meta.slide.frontmatter),O(De,R(e.route.no)),O(Ie,R(e.renderContext)),O(je,me(e,"clicksContext")),O(Ne,s);const r=j(()=>({"user-select":_t.selectable?void 0:"none","--slidev-slide-zoom-scale":s.value===1?void 0:s.value}));return(a,l)=>(J(),rt("div",{"data-slidev-no":e.route.no,class:xe(V(qe)(t.route,["slide","presenter"].includes(e.renderContext)?"":"disable-view-transition")),style:U(r.value),lang:e.route.meta.slide.frontmatter.lang},[At(V(Yn)),(J(),ye(we(e.route.component))),At(V(Hn))],14,Jn))}}),ls=Mt(Qn,[["__scopeId","data-v-470211b6"]]);export{as as G,ls as S,rs as _,is as a,os as b,dn as u};
