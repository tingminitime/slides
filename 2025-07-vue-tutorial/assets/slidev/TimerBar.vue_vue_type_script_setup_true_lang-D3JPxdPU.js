import{f as w,e as u,F as $,aj as M,a1 as x,o,k as m,n as A,d as B,w as D,j as f,ao as N,z as s,ap as T,ai as z,L as j}from"../modules/vue-Bl2l7_5U.js";import{a as F,s as L,p as V}from"../index-0rbkrWEB.js";import{a as b}from"../monaco/bundled-types-Cyvq5-7x.js";const E={class:"relative flex gap-px"},H=w({__name:"CurrentProgressBar",props:{clicksContext:{},current:{}},setup(r){const e=r,a=F(),t=s(()=>e.clicksContext??a.clicksContext.value),l=s(()=>e.current??a.currentSlideNo.value),{total:n}=a;return(d,g)=>(o(),u("div",E,[(o(!0),u($,null,M(x(n)-1,i=>(o(),u("div",{key:i,class:A(["border-x border-b border-main h-4px transition-all",i<l.value?"bg-primary border-primary":""]),style:m({width:`${1/(x(n)-1)*100}%`})},[B(N,{name:"fade"},{default:D(()=>[i===l.value?(o(),u("div",{key:0,class:"h-full bg-primary op75 transition-all",style:m({width:`${t.value.total===0?0:t.value.current/(t.value.total+1)*100}%`})},null,4)):f("v-if",!0)]),_:2},1024)],6))),128))]))}});function I(){const r=s(()=>b.timer||"stopwatch"),e=s(()=>V(b.duration).seconds),a=T(100,{controls:!0}),t=z(L,"timer"),l=s(()=>t.value?.status),n=s(()=>(a.counter.value,t.value.status==="stopped"||!t.value.startedAt?0:t.value.status==="paused"?t.value.pausedAt-t.value.startedAt:Date.now()-t.value.startedAt)),d=s(()=>n.value/1e3),g=s(()=>d.value/e.value*100),i=s(()=>{if(r.value==="stopwatch"&&(t.value.status==="stopped"||!t.value.startedAt))return{h:"",m:"-",s:"--",ms:"-"};const c=r.value==="countdown"?e.value*1e3-n.value:n.value;let p=Math.floor(c/1e3/60/60).toString();p==="0"&&(p="");let v=Math.floor(c/1e3/60%60).toString();p&&(v=v.padStart(2,"0"));const C=Math.floor(c/1e3%60).toString().padStart(2,"0"),S=Math.floor(c%1e3/100).toString();return{h:p,m:v,s:C,ms:S}});function y(){a.pause(),t.value={status:"stopped",slides:{},startedAt:0,pausedAt:0}}function h(){t.value&&(t.value?.status==="stopped"?(t.value.status="running",t.value.startedAt=Date.now()):t.value.status==="paused"&&(t.value.status="running",t.value.startedAt=Date.now()-(t.value.pausedAt-t.value.startedAt)),a.resume())}function _(){t.value.status="paused",t.value.pausedAt=Date.now(),a.pause()}function k(){t.value.status==="running"?_():h()}return{state:t,status:l,timer:i,reset:y,toggle:k,resume:h,pause:_,passed:d,percentage:g,duration:e,mode:r}}const P={class:"border-b mt-px border-main relative flex h-4px"},J=w({__name:"TimerBar",setup(r){const e=j(I()),a=s(()=>e.status==="stopped"?"op50":e.status==="paused"?"bg-blue":e.percentage>100?"bg-red":e.percentage>80?"bg-yellow":"bg-green");return(t,l)=>(o(),u("div",P,[e.status!=="stopped"?(o(),u("div",{key:0,class:A(["h-4px",a.value]),style:m({width:`${e.percentage}%`})},null,6)):f("v-if",!0),f(" {{ timesplits }} ")]))}});export{H as _,J as a,I as u};
