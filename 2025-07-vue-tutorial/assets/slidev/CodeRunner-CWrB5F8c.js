const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/shiki-CQTAuNEf.js","assets/monaco/bundled-types-Cyvq5-7x.js","assets/modules/shiki-CxsFbBJl.js","assets/modules/vue-Bl2l7_5U.js","assets/modules/shiki-UqVAgQbi.css","assets/modules/file-saver-C8QSpN-3.js","assets/monaco/bundled-types-wYURhAAQ.css"])))=>i.map(i=>d[i]);
import{r as w,f as M,O as L,o as c,e as d,X as N,aP as P,_ as D,M as H,af as z,am as F,g as A,t as $,a1 as y,F as b,aj as V,b as J,n as Q,j as T,Q as U,k as q,d as K,w as W,ah as X,z as G,H as Y}from"../modules/vue-Bl2l7_5U.js";import{a1 as Z,_ as k,a2 as ee,a as te,a0 as ne,a3 as j}from"../monaco/bundled-types-Cyvq5-7x.js";import{a as se,B as re}from"../index-0rbkrWEB.js";import{u as oe}from"./context-BAQLIszF.js";import{_ as ie}from"./IconButton.vue_vue_type_script_setup_true_lang-DSQlQH8j.js";import"../modules/shiki-CxsFbBJl.js";import"../modules/file-saver-C8QSpN-3.js";const B={},ae=Z(()=>({async vue(i){const n=await k(()=>import("../modules/vue-Bl2l7_5U.js").then(t=>t.aQ),[]),{parse:r,compileScript:m}=await k(async()=>{const{parse:t,compileScript:s}=await import("../modules/vue-Bl2l7_5U.js").then(u=>u.aR);return{parse:t,compileScript:s}},[]),l=r(i);let p=m(l.descriptor,{id:l.descriptor.filename,genDefaultAs:"__Component",inlineTemplate:!0}).content;p=p.replace(/import (\{[^}]+\}) from ['"]vue['"]/g,(t,s)=>`const ${s.replace(/\sas\s/g,":")} = Vue`),p+=`
return __Component`;const o=new Function(`return (Vue) => {${p}}`)()(n),a=n.createApp(o),e=document.createElement("div");return a.mount(e),{element:e}}})),le=[Object.values([])[0],Object.values([ae])[0]].filter(Boolean),ce=ee(async()=>{const i={javascript:E,js:E,typescript:E,ts:E},{defaultHighlightOptions:n,getEagerHighlighter:r}=await(await k(async()=>{const{default:o}=await import("../shiki-CQTAuNEf.js");return{default:o}},__vite__mapDeps([0,1,2,3,4,5,6]))).default(),m=await r(),l=(o,a,e)=>m.codeToHtml(o,{...n,lang:a,...e}),p=async(o,a,e)=>{try{const t=i[a];if(!t)throw new Error(`Runner for language "${a}" not found`);return await t(o,{options:e,highlight:l,run:async(s,u)=>await p(s,u,e)})}catch(t){return console.error(t),{error:`${t}`}}};for(const o of le){const a=await o(i);Object.assign(i,a)}return{highlight:l,run:p}});function ue(i){const n=w([]),r=e=>n.value.push({error:String(e)}),m=(...e)=>n.value.push(e.map(p)),l=Object.assign({},console);l.info=l.log=l.debug=l.warn=l.error=m,l.clear=()=>n.value.length=0;try{const e=`return async (console, __slidev_import, __slidev_on_error) => {
    ${te.monacoRunUseStrict?'"use strict";':""}
      try {
        ${a(i)}
      } catch (e) {
        __slidev_on_error(e)
      }
    }`;new Function(e)()(l,t=>{const s=B[t];if(!s)throw new Error(`Module not found: ${t}.
Available modules: ${Object.keys(B).join(", ")}. Please refer to https://sli.dev/custom/config-code-runners#additional-runner-dependencies`);return s},r)}catch(e){r(e)}function p(e){return typeof e=="string"?{text:e}:{text:o(e),highlightLang:"javascript"}}function o(e){let t="";if(e instanceof Error)t=`Error: ${JSON.stringify(e.message)}`;else if(e==null||typeof e=="symbol")t=String(e);else if(Array.isArray(e))t=`[${e.map(o).join(", ")}]`;else if(e instanceof Set){const s=[...e];t=`Set (${e.size}) {${s.map(o).join(", ")}}`}else if(e instanceof Map){const s=[...e.entries()];t=`Map (${e.size}) {${s.map(([u,h])=>`${o(u)} => ${o(h)}`).join(", ")}}`}else if(e instanceof RegExp)t=e.toString();else if(typeof e=="string")t=JSON.stringify(e);else if(typeof e=="object"){const s=e.constructor?.name??"",u=s&&s==="Object"?"":s;t=(u?`${u}: `:"")+JSON.stringify(e,(v,g)=>g===void 0?"__undefined__":g,2).replace(/"__undefined__"/g,"undefined"),t=String(t)}else t=String(e);return t}function a(e){return e=e.replace('import "reflect-metadata"',"").replace('require("reflect-metadata")',""),e=e.replace("export {};",""),e}return n}let O;async function E(i){O??=await k(()=>import("../monaco/bundled-types-Cyvq5-7x.js").then(r=>r.t),__vite__mapDeps([1,2,3,4,5,6])),i=O.transpileModule(i,{compilerOptions:{module:O.ModuleKind.ESNext,target:O.ScriptTarget.ES2022},transformers:{after:[de]}}).outputText;const n=/import\s*\((.+)\)/g;return i=i.replace(n,(r,m)=>`__slidev_import(${m})`),ue(i)}function de(i){const{factory:n}=i,{isImportDeclaration:r,isNamedImports:m,NodeFlags:l}=O;return p=>{const o=[...p.statements];for(let a=0;a<o.length;a++){const e=o[a];if(!r(e))continue;let t;const s=e.importClause?.namedBindings,u=[];if(e.importClause?.name&&u.push(n.createBindingElement(void 0,n.createIdentifier("default"),e.importClause.name)),s)if(m(s)){for(const v of s.elements)u.push(n.createBindingElement(void 0,v.propertyName,v.name));t=n.createObjectBindingPattern(u)}else t=n.createIdentifier(s.name.text);else t=n.createObjectBindingPattern(u);const h=n.createVariableStatement(void 0,n.createVariableDeclarationList([n.createVariableDeclaration(t,void 0,void 0,n.createAwaitExpression(n.createCallExpression(n.createIdentifier("import"),void 0,[e.moduleSpecifier])))],l.Const));o[a]=h}return n.updateSourceFile(p,o)}}const pe=M({__name:"DomElement",props:{element:{}},setup(i){const n=i,r=w();return L(()=>{r.value&&r.value.appendChild(n.element)}),(m,l)=>(c(),d("div",{ref_key:"container",ref:r},null,512))}}),me={key:0,class:"text-sm text-center opacity-50"},fe={key:1,class:"text-sm text-center opacity-50"},_e={key:2,class:"text-sm text-center opacity-50"},he=["innerHTML"],ve={key:1,class:"text-red-500"},ge={key:3,class:"output-line"},ye=["innerHTML"],we={key:2,class:"separator"},xe={key:0,class:"absolute right-1 top-1 max-h-full flex gap-1"},je=M({__name:"CodeRunner",props:{modelValue:{},lang:{},autorun:{type:[Boolean,String]},height:{},showOutputAt:{type:[null,Boolean,String,Number,Array]},highlightOutput:{type:Boolean},runnerOptions:{}},emits:["update:modelValue"],setup(i,{emit:n}){const r=i,m=n,{isPrintMode:l}=se(),p=X(r,"modelValue",m),{$renderContext:o,$clicksContext:a}=oe(),e=G(()=>!["slide","presenter"].includes(o.value)),t=l.value?"once":r.autorun,s=w(t),u=Y(),h=w(0),v=w(),g=w(r.showOutputAt);if(r.showOutputAt){const x=re();N(()=>{const _=a.calculate(r.showOutputAt);_?(a.register(x,_),P(()=>{g.value=!_.isActive.value})):g.value=!1}),D(()=>a.unregister(x))}const C=ne(200,async()=>{if(e.value)return;const{highlight:x,run:_}=await ce();v.value=x;const f=setTimeout(()=>{s.value=!0},500);u.value=await _(p.value,r.lang,r.runnerOptions??{}),h.value+=1,s.value=!1,clearTimeout(f)});return t==="once"?C():t&&H(p,C,{immediate:!0}),(x,_)=>(c(),d(b,null,[z(A("div",{class:"relative flex flex-col rounded-b border-t border-main",style:q({height:r.height}),"data-waitfor":".slidev-runner-output"},[e.value?(c(),d("div",me,' Code is disabled in the "'+$(y(o))+'" mode ',1)):s.value?(c(),d("div",fe," Running... ")):u.value?(c(),d("div",{key:`run-${h.value}`,class:"slidev-runner-output"},[(c(!0),d(b,null,V(y(j)(U(u.value)),(f,I)=>(c(),d(b,{key:I},["html"in f?(c(),d("div",{key:0,innerHTML:f.html},null,8,he)):"error"in f?(c(),d("div",ve,$(f.error),1)):"element"in f?(c(),J(pe,{key:2,element:f.element},null,8,["element"])):(c(),d("div",ge,[(c(!0),d(b,null,V(y(j)(f),(S,R)=>(c(),d(b,{key:R},[S.highlightLang&&v.value?(c(),d("span",{key:0,class:"highlighted",innerHTML:v.value(S.text,S.highlightLang)},null,8,ye)):(c(),d("span",{key:1,class:Q(S.class)},$(S.text),3)),R<y(j)(f).length-1?(c(),d("span",we,",")):T("v-if",!0)],64))),128))]))],64))),128))])):(c(),d("div",_e," Click the play button to run the code "))],4),[[F,!g.value]]),y(p).trim()?(c(),d("div",xe,[K(ie,{class:"w-8 h-8 max-h-full flex justify-center items-center",title:"Run code",onClick:y(C)},{default:W(()=>[..._[0]||(_[0]=[A("div",{class:"i-carbon:play"},null,-1)])]),_:1},8,["onClick"])])):T("v-if",!0)],64))}});export{je as default};
